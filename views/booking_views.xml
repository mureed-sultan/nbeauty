<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>

        <!-- ‚úÖ Assets -->
        <template id="assets_booking_js" inherit_id="website.layout" name="Booking Page JS">
            <xpath expr="//footer" position="inside">
                <script type="text/javascript" src="/nbeauty/static/src/js/booking.js"></script>
            </xpath>
        </template>

        <!-- ‚úÖ Booking Page -->
        <template id="website_booking_form" name="NBeauty Booking Page">
            <t t-call="website.layout">
                <section style="position: relative; background: linear-gradient(135deg, #fff5fa, #f7f9ff); overflow: hidden;">

                    <!-- Decorative Top Wave -->
                    <div style="position:absolute; top:0; left:0; width:100%; overflow:hidden; line-height:0;">
                        <svg viewBox="0 0 500 150" preserveAspectRatio="none" style="height: 100px; width: 100%;">
                            <path d="M0,0 C150,100 350,0 500,100 L500,0 L0,0 Z" style="stroke: none; fill: #ffffff;"></path>
                        </svg>
                    </div>

                    <div class="container py-5" style="position: relative; z-index:2;">
                        <div class="row g-5 align-items-stretch">

                            <!-- Left Side -->
                            <div class="col-md-5 d-flex">
                                <div class="p-4 text-center shadow-lg d-flex flex-column w-100"
                                     style="background: linear-gradient(145deg, #ffffff, #fdfbff); border-radius: 24px;">
                                    <img src="/nbeauty/static/src/img/lowres/image-11.JPG"
                                         class="img-fluid mb-4 shadow-sm"
                                         style="border-radius: 20px; max-height:220px; object-fit:cover;" />
                                    <h2 style="color:#000; font-weight:700;">Book Your Signature Beauty Experience</h2>
                                    <h4 style="color:#8ea488; font-weight:500;">ÿßÿ≠ÿ¨ÿ≤ ÿ™ÿ¨ÿ±ÿ®ÿ™ŸÉ ÿßŸÑÿ¨ŸÖÿßŸÑŸäÿ© ÿßŸÑŸÅÿßÿÆÿ±ÿ©</h4>
                                    <p class="mt-3 px-3" style="font-size:1rem; color:#6c757d; line-height:1.7;">
                                        Step into a world of elegance and self-care...
                                    </p>
                                </div>
                            </div>

                            <!-- Right Side -->
                            <div class="col-md-7 d-flex">
                                <div class="card shadow-lg border-0 p-5 d-flex flex-column w-100"
                                     style="background: #fff; border-radius: 24px;">

                                    <!-- ‚úÖ Booking Form -->
                                    <form action="/nbeauty/booking/submit" method="post" class="form mt-4" id="nbeauty-booking-form">
                                        <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                                        <input type="hidden" id="services_json" name="services_json"/>

                                        <!-- Multi-Service Selection -->
                                        <div class="mb-4">
                                            <h3 style="color:#000000; font-weight:600;">Select Your Services:</h3>
                                            <select id="service-dropdown" class="form-select mb-3" multiple="multiple" size="6">
                                                <t t-foreach="services" t-as="srv">
                                                    <option t-att-value="srv.id"><t t-esc="srv.name"/></option>
                                                </t>
                                            </select>
                                            <p class="small text-muted">üí° Hold Ctrl/Cmd to select multiple services.</p>
                                        </div>

                                        <!-- Branch Selection -->
                                        <div class="mb-4">
                                            <h5 class="text-muted">Choose Your Preferred Branch:</h5>
                                            <select name="branch_id" class="form-select" required="">
                                                <t t-foreach="branches" t-as="br">
                                                    <option t-att-value="br.id"><t t-esc="br.name"/></option>
                                                </t>
                                            </select>
                                        </div>

                                        <!-- Employee Selection -->
                                        <div class="mb-4">
                                            <h5 class="text-muted">Choose Your Stylist:</h5>
                                            <select name="employee_id" class="form-select">
                                                <option value="">Any Available Stylist</option>
                                                <t t-foreach="employees" t-as="emp">
                                                    <option t-att-value="emp.id"><t t-esc="emp.name"/></option>
                                                </t>
                                            </select>
                                        </div>

                                        <!-- Customer Info -->
                                        <div class="mb-3">
                                            <label class="form-label">Your Name:</label>
                                            <input type="text" name="customer_name" class="form-control" required=""/>
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">Mobile Number:</label>
                                            <input type="text" name="customer_mobile" class="form-control" required=""/>
                                        </div>

                                        <!-- Date & Time -->
                                        <div class="row">
                                            <div class="col-md-6 mb-3">
                                                <label class="form-label">Booking Date:</label>
                                                <input type="date" name="booking_date" class="form-control" required=""/>
                                            </div>
                                            <div class="col-md-6 mb-3">
                                                <label class="form-label">Booking Time:</label>
                                                <input type="time" name="booking_time" class="form-control" required=""/>
                                            </div>
                                        </div>

                                        <div class="text-center mt-4">
                                            <button type="submit" class="btn btn-lg px-5 py-2"
                                                    style="background:linear-gradient(90deg,#d7a7aa,#f6d2d1); color:#fff; border:none; border-radius: 50px;">
                                                ‚ú® Confirm My Booking
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>

                        </div>
                    </div>

                    <!-- Decorative Bottom Wave -->
                    <div style="position:absolute; bottom:0; left:0; width:100%; overflow:hidden; line-height:0;">
                        <svg viewBox="0 0 500 150" preserveAspectRatio="none" style="height: 100px; width: 100%;">
                            <path d="M0,100 C150,0 350,150 500,50 L500,150 L0,150 Z" style="stroke: none; fill: #ffffff;"></path>
                        </svg>
                    </div>
                </section>

                <!-- Inline JS to capture services -->
                <script>
                    document.getElementById('nbeauty-booking-form').addEventListener('submit', function(e) {
                        let selected = Array.from(document.getElementById('service-dropdown').selectedOptions).map(opt => opt.value);
                        document.getElementById('services_json').value = JSON.stringify(selected);
                    });
                </script>
            </t>
        </template>

    </data>
</odoo>
